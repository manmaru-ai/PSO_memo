# PSO_memo

# 開発メモ

## 1. プロジェクト概要

粒子群最適化（PSO）アルゴリズムの動作を視覚的に理解するためのWebサイトを制作する。
初期版のフィードバックに基づき、「アニメーションが速すぎて過程が分からない」という課題を解決するため、**ユーザーによる速度調整機能**と**アルゴリズムの思考プロセスの可視化**を追加で実装した。

---

## 2. 目的

* **アルゴリズムの思考プロセスの解明**
  　粒子がなぜその方向に動くのか、その判断基準となっている「個人の最良解（pBest）」と「全体の最良解（gBest）」の影響を視覚的に明確にする。

* **ユーザー主導の学習体験**
  　ユーザーが自身の理解度に合わせてシミュレーション速度を調整したり、表示情報を切り替えたりできるようにすることで、より深い学習を可能にする。

---

## 3. 使用技術

* HTML
* CSS（Tailwind CSS）
* JavaScript（ES6）
* HTML5 Canvas

> ※ 基本技術は初期版と同様。

---

## 4. 設計・実装の改良点

### a. 可視化の強化

* **引力線の追加**
  　各粒子から、pBest（個人の最良解）へ向かう**青い線**と、gBest（群全体の最良解）へ向かう**緑の線**を描画する機能を追加。
  　これにより、PSOの速度更新式における「認知コンポーネント」と「社会コンポーネント」の役割が直感的に理解できる。

* **pBestの明示**
  　各粒子のpBestの位置を小さな**青い点**で表示。粒子が記憶している「個人的な成功体験」の場所が明確になった。

* **表示切替機能**
  　これらの追加情報は**チェックボックス**で自由に表示・非表示を切り替え可能。
  　ユーザーが見たい情報に集中できる。

---

### b. インタラクティブ性の向上

* **速度調整スライダー**
  　シミュレーションの更新間隔を制御するスライダーを設置。
  　`setTimeout`と組み合わせ、アニメーションを遅くして粒子一つ一つの動きを追いやすくし、速くして収束の様子を俯瞰できるようにした。

* **アニメーション制御の改善**
  　従来の`requestAnimationFrame`によるループから、**setTimeoutを再帰的に呼び出す方式**に変更。
  　これにより、**フレームレートに依存しない安定した速度制御**が可能になった。

---

## 5. 開発で工夫した点・苦労した点

### 工夫した点

* **「なぜ動くか」の可視化**
  　やみくもに動いているように見えた粒子に「引力線」を追加し、明確なロジックがあることを示した点。
  　これが教育的価値を最も高めたと考えている。

* **ユーザーコントロールの拡充**
  　スピード調整と表示切替により、\*\*静的な教材から「ユーザーが触って学べる動的なツール」\*\*へと進化した点。

### 苦労した点

* **描画負荷の管理**
  　多くの線や点を描画するとパフォーマンスが低下する懸念があったため、**背景の地形描画は初回のみに留め**、アニメーションループ内では粒子の位置情報のみを描画。

* **直感的なUI設計**
  　どの線が何を示しているのか、どの設定が何に影響するのかがユーザーにすぐ伝わるよう、**色分けやラベルの文言**に配慮した。

---

## 6. 今後の展望

* **パラメータの動的変更**
  　`W`, `C1`, `C2`といったPSOの内部パラメータもスライダーで変更できるようにし、パラメータが探索結果に与える影響を実験できるようにする。

* **統計情報の可視化**
  　世代ごとの平均評価値の推移をグラフで表示するなど、よりマクロな視点での分析情報を提供する。

